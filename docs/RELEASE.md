# リリース手順

このドキュメントでは、タグベースでChrome拡張機能をリリースする手順を説明します。

## 前提条件

- Node.js 18以上がインストールされている
- Gitが設定されている
- GitHubリポジトリにアクセス権限がある

## リリース手順

### 1. 新しいバージョンの準備

新しいバージョンをリリースする前に、`versions/` ディレクトリに新しいバージョンフォルダを作成してください。

例：
```
versions/
├── v0.1/
├── v0.2/
└── v0.3/  ← 新しく作成
```

### 2. リリーススクリプトの実行

以下のコマンドでリリースを開始します：

```bash
npm run release v0.3
```

このスクリプトは以下の処理を自動で行います：

1. バージョンの検証
2. 変更の確認
3. 最新の変更をプル
4. 指定されたバージョンのビルド
5. ビルド結果のコミット
6. タグの作成とプッシュ

### 3. GitHub Actionsによる自動リリース

タグがプッシュされると、GitHub Actionsが自動で以下の処理を実行します：

1. 指定されたバージョンのビルド
2. ZIPファイルの作成
3. GitHubリリースの作成
4. リリースアセットの添付

## リリース後の確認

リリースが完了すると、以下の場所で確認できます：

- **GitHubリリース**: `https://github.com/[ユーザー名]/[リポジトリ名]/releases`
- **ビルド結果**: `dist/[バージョン名]/` ディレクトリ

## トラブルシューティング

### エラー: コミットされていない変更があります

```bash
git add .
git commit -m "Update before release"
npm run release v0.3
```

### エラー: バージョンディレクトリが存在しません

`versions/` ディレクトリに指定したバージョンのフォルダを作成してください。

### リリーススクリプトの権限エラー

```bash
chmod +x scripts/release.js
```

## 手動でのリリース

GitHub Actionsを使用しない場合は、以下の手順で手動リリースできます：

1. ビルド
```bash
npm run build:v0.3
```

2. タグの作成
```bash
git tag v0.3
git push origin v0.3
```

3. GitHubでリリースを作成
   - リリースページで「Draft a new release」をクリック
   - タグを選択
   - リリースノートを記入
   - `dist/v0.3/` の内容をZIP化してアップロード

## 注意事項

- リリース前に必ずテストを実行してください
- メインブランチ（main/master）でのリリースを推奨します
- バージョン番号は `vX.Y` または `vX.Y.Z` の形式にしてください
- リリース後は、ユーザーに適切なインストール手順を提供してください
